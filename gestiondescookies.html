<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gestion des Cookies ‚Äì Baptiste & Daphn√© Immobilier</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700;900&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <link rel="icon" href="/favicon.png" type="image/png">
  <style>
    :root {
      --navy:  #1B2B4B;
      --navy2: #162240;
      --gold:  #c9a96e;
      --white: #FFFFFF;
      --grey:  #8A9AB5;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Montserrat', sans-serif; background: var(--navy); color: var(--white); overflow-x: hidden; }

    nav {
      position: fixed; top: 0; left: 0; right: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 1.2rem 5%;
      background: rgba(27,43,75,0.94);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(200,151,58,0.2);
    }
    .nav-logo { font-family: 'Merriweather', serif; font-size: 1.1rem; color: var(--white); letter-spacing: .04em; text-decoration: none; }
    .nav-logo span { color: var(--gold); }
    .nav-back { font-size: .85rem; color: rgba(255,255,255,.6); text-decoration: none; font-weight: 500; letter-spacing: .06em; text-transform: uppercase; transition: color .25s; }
    .nav-back:hover { color: var(--gold); }

    .page-hero {
      padding: 9rem 5% 4rem;
      background: var(--navy2);
      border-bottom: 1px solid rgba(200,151,58,.15);
      position: relative; overflow: hidden;
    }
    .page-hero::before {
      content: ''; position: absolute; inset: 0;
      background: radial-gradient(ellipse 60% 80% at 80% 50%, rgba(200,151,58,.06), transparent 70%);
      pointer-events: none;
    }
    .page-hero .eyebrow { font-size: .75rem; font-weight: 600; letter-spacing: .2em; text-transform: uppercase; color: var(--gold); display: block; margin-bottom: 1rem; }
    .page-hero h1 { font-family: 'Merriweather', serif; font-size: clamp(2rem, 4vw, 3rem); font-weight: 900; margin-bottom: .8rem; }
    .page-hero .date { font-size: .82rem; color: var(--grey); }

    .content { max-width: 800px; margin: 0 auto; padding: 5rem 5%; }

    /* ‚îÄ‚îÄ WHAT ARE COOKIES EXPLAINER ‚îÄ‚îÄ */
    .explainer {
      background: rgba(200,151,58,.06); border: 1px solid rgba(200,151,58,.2);
      border-radius: 12px; padding: 2rem; margin-bottom: 3rem;
    }
    .explainer h2 { font-family: 'Merriweather', serif; font-size: 1.15rem; color: var(--gold); margin-bottom: 1rem; }
    .explainer p { font-size: .9rem; color: rgba(255,255,255,.7); line-height: 1.8; margin-bottom: .7rem; }
    .explainer p:last-child { margin-bottom: 0; }

    /* ‚îÄ‚îÄ PREFERENCE PANEL ‚îÄ‚îÄ */
    .pref-panel { margin-bottom: 3rem; }
    .pref-panel h2 { font-family: 'Merriweather', serif; font-size: 1.3rem; color: var(--gold); margin-bottom: 1.5rem; padding-bottom: .6rem; border-bottom: 1px solid rgba(200,151,58,.2); }

    .cookie-row {
      display: flex; align-items: flex-start; justify-content: space-between; gap: 1.5rem;
      background: rgba(255,255,255,.03); border: 1px solid rgba(255,255,255,.08);
      border-radius: 10px; padding: 1.4rem 1.6rem; margin-bottom: .8rem;
      transition: border-color .2s;
    }
    .cookie-row:hover { border-color: rgba(200,151,58,.25); }
    .cookie-row.required { opacity: .75; }
    .cookie-info { flex: 1; }
    .cookie-info h3 { font-size: .95rem; font-weight: 600; margin-bottom: .3rem; display: flex; align-items: center; gap: .6rem; }
    .cookie-info h3 .badge { font-size: .65rem; letter-spacing: .1em; text-transform: uppercase; background: rgba(200,151,58,.15); color: var(--gold); border: 1px solid rgba(200,151,58,.3); border-radius: 3px; padding: .15rem .5rem; font-weight: 600; }
    .cookie-info h3 .badge.required { background: rgba(100,200,100,.1); color: #7fd87f; border-color: rgba(100,200,100,.3); }
    .cookie-info p { font-size: .83rem; color: rgba(255,255,255,.55); line-height: 1.65; margin-bottom: .4rem; }
    .cookie-info .cookie-names { font-size: .75rem; color: var(--grey); font-family: monospace; }

    /* Toggle switch */
    .toggle-wrap { flex-shrink: 0; display: flex; flex-direction: column; align-items: center; gap: .4rem; padding-top: .1rem; }
    .toggle { position: relative; width: 46px; height: 26px; }
    .toggle input { opacity: 0; width: 0; height: 0; }
    .slider {
      position: absolute; cursor: pointer; inset: 0;
      background: rgba(255,255,255,.15); border-radius: 26px;
      transition: background .3s;
    }
    .slider::before {
      content: ''; position: absolute; width: 20px; height: 20px;
      left: 3px; bottom: 3px; background: var(--white);
      border-radius: 50%; transition: transform .3s;
    }
    input:checked + .slider { background: var(--gold); }
    input:checked + .slider::before { transform: translateX(20px); }
    input:disabled + .slider { cursor: not-allowed; opacity: .5; }
    .toggle-label { font-size: .7rem; color: var(--grey); text-align: center; }

    /* ‚îÄ‚îÄ ACTION BUTTONS ‚îÄ‚îÄ */
    .actions { display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 2rem; }
    .btn-accept { background: var(--gold); color: var(--navy); font-weight: 700; font-size: .9rem; padding: .9rem 2rem; border-radius: 6px; border: none; cursor: pointer; transition: opacity .2s, transform .2s; letter-spacing: .02em; }
    .btn-accept:hover { opacity: .88; transform: translateY(-1px); }
    .btn-refuse { background: transparent; color: rgba(255,255,255,.6); font-size: .9rem; padding: .9rem 2rem; border-radius: 6px; border: 1px solid rgba(255,255,255,.2); cursor: pointer; transition: border-color .2s, color .2s; font-family: 'Montserrat', sans-serif; }
    .btn-refuse:hover { border-color: rgba(255,255,255,.4); color: var(--white); }
    .btn-save { background: transparent; color: var(--gold); font-size: .9rem; padding: .9rem 2rem; border-radius: 6px; border: 1px solid rgba(200,151,58,.4); cursor: pointer; transition: background .2s; font-family: 'Montserrat', sans-serif; font-weight: 600; }
    .btn-save:hover { background: rgba(200,151,58,.1); }

    .status-msg { display: none; margin-top: 1rem; font-size: .85rem; padding: .7rem 1rem; border-radius: 6px; background: rgba(100,200,100,.1); border: 1px solid rgba(100,200,100,.3); color: #7fd87f; }

    /* ‚îÄ‚îÄ COOKIE TABLE ‚îÄ‚îÄ */
    .section-block { margin-bottom: 3rem; }
    .section-block h2 { font-family: 'Merriweather', serif; font-size: 1.3rem; color: var(--gold); margin-bottom: 1rem; padding-bottom: .6rem; border-bottom: 1px solid rgba(200,151,58,.2); }
    .section-block p { font-size: .9rem; color: rgba(255,255,255,.65); line-height: 1.8; margin-bottom: .8rem; }
    .section-block a { color: var(--gold); text-decoration: none; }
    .section-block a:hover { text-decoration: underline; }

    .cookie-table { width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: .83rem; }
    .cookie-table th { background: rgba(200,151,58,.1); color: var(--gold); text-align: left; padding: .7rem 1rem; font-weight: 600; letter-spacing: .05em; font-size: .75rem; text-transform: uppercase; }
    .cookie-table td { padding: .7rem 1rem; border-bottom: 1px solid rgba(255,255,255,.06); color: rgba(255,255,255,.65); vertical-align: top; }
    .cookie-table tr:hover td { background: rgba(255,255,255,.02); }
    .cookie-table code { font-size: .8rem; background: rgba(255,255,255,.06); padding: .1rem .4rem; border-radius: 3px; color: var(--gold); }

    footer { background: var(--navy2); border-top: 1px solid rgba(255,255,255,.06); padding: 2.5rem 5%; display: flex; align-items: flex-start; justify-content: space-between; flex-wrap: wrap; gap: 1.5rem; }
    .footer-logo { font-family: 'Merriweather', serif; font-size: 1rem; white-space: nowrap; }
    .footer-logo span { color: var(--gold); }
    footer p { font-size: .73rem; color: var(--grey); max-width: 660px; line-height: 1.7; }
    .footer-links { display: flex; gap: 1.5rem; flex-wrap: wrap; margin-top: .5rem; }
    .footer-links a { font-size: .75rem; color: var(--grey); text-decoration: none; transition: color .2s; }
    .footer-links a:hover { color: var(--gold); }

    @media (max-width: 600px) {
      .content { padding: 3rem 5%; }
      #cookie-banner { flex-direction: column; align-items: flex-start; }
    }
    !-- ‚îÄ‚îÄ CSS ‚îÄ‚îÄ -->
<style>
#cookie-banner {
  position: fixed; bottom: 0; left: 0; right: 0; z-index: 9999;
  background: linear-gradient(135deg, #0d1a30 0%, #162240 100%);
  border-top: 1px solid rgba(201,169,110,.35);
  box-shadow: 0 -12px 48px rgba(0,0,0,.6);
  transform: translateY(110%);
  transition: transform .5s cubic-bezier(.22,1,.36,1);
  font-family: 'Montserrat', sans-serif;
}
#cookie-banner.visible { transform: translateY(0); }

/* ‚îÄ‚îÄ VUE PRINCIPALE ‚îÄ‚îÄ */
#banner-main {
  padding: 1.6rem 5%;
  display: flex; align-items: center; justify-content: space-between;
  gap: 2rem; flex-wrap: wrap;
}
.banner-left { flex: 1; min-width: 240px; }
.banner-left strong { display: block; font-size: 1rem; font-weight: 700; color: #fff; margin-bottom: .4rem; }
.banner-left p { font-size: .78rem; color: rgba(255,255,255,.5); line-height: 1.6; margin: 0; }
.banner-left p em { font-style: normal; color: rgba(255,255,255,.75); font-weight: 500; }
.banner-left p a { color: #c9a96e; text-decoration: none; }

.banner-right { display: flex; flex-direction: column; align-items: flex-end; gap: .6rem; flex-shrink: 0; }
.banner-btns-row { display: flex; gap: .7rem; align-items: center; }

.btn-banner-accept {
  background: linear-gradient(135deg, #d4b06a 0%, #c9a96e 60%, #b8954f 100%);
  color: #1B2B4B; font-family: 'Montserrat', sans-serif;
  font-weight: 800; font-size: .88rem; letter-spacing: .04em;
  padding: .75rem 1.8rem; border-radius: 6px; border: none; cursor: pointer;
  box-shadow: 0 4px 18px rgba(201,169,110,.35);
  transition: box-shadow .2s, transform .2s, filter .2s; white-space: nowrap;
}
.btn-banner-accept:hover { box-shadow: 0 6px 28px rgba(201,169,110,.55); transform: translateY(-1px); filter: brightness(1.07); }

.btn-banner-refuse {
  background: transparent; color: rgba(255,255,255,.45);
  font-family: 'Montserrat', sans-serif; font-weight: 500; font-size: .88rem;
  padding: .75rem 1.2rem; border-radius: 6px; border: 1px solid rgba(255,255,255,.15);
  cursor: pointer; transition: color .2s, border-color .2s; white-space: nowrap;
}
.btn-banner-refuse:hover { color: rgba(255,255,255,.75); border-color: rgba(255,255,255,.3); }

.btn-banner-custom {
  background: none; border: none; cursor: pointer; font-family: 'Montserrat', sans-serif;
  font-size: .72rem; color: rgba(255,255,255,.3);
  text-decoration: underline; text-underline-offset: 3px;
  padding: 0; transition: color .2s;
}
.btn-banner-custom:hover { color: rgba(255,255,255,.55); }
.banner-reassurance { font-size: .68rem; color: rgba(255,255,255,.2); text-align: right; }

/* ‚îÄ‚îÄ VUE PERSONNALISATION ‚îÄ‚îÄ */
#banner-custom {
  display: none;
  padding: 1.6rem 5% 1.4rem;
  border-top: 1px solid rgba(255,255,255,.06);
}
#banner-custom.open { display: block; }

.custom-title {
  font-size: .8rem; font-weight: 700; color: #c9a96e;
  letter-spacing: .12em; text-transform: uppercase;
  margin-bottom: 1rem;
}

.custom-rows { display: flex; gap: .8rem; flex-wrap: wrap; margin-bottom: 1.2rem; }

.custom-row {
  flex: 1; min-width: 180px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 8px; padding: .9rem 1rem;
  display: flex; align-items: center; justify-content: space-between;
  gap: .8rem; transition: border-color .2s;
}
.custom-row:hover { border-color: rgba(201,169,110,.25); }
.custom-row.required { opacity: .6; }

.custom-row-info { flex: 1; }
.custom-row-info strong { display: block; font-size: .8rem; color: #fff; margin-bottom: .15rem; }
.custom-row-info span { font-size: .7rem; color: rgba(255,255,255,.35); line-height: 1.4; }

/* Toggle */
.toggle { position: relative; width: 40px; height: 22px; flex-shrink: 0; }
.toggle input { opacity: 0; width: 0; height: 0; }
.slider {
  position: absolute; cursor: pointer; inset: 0;
  background: rgba(255,255,255,.12); border-radius: 22px; transition: background .3s;
}
.slider::before {
  content: ''; position: absolute; width: 16px; height: 16px;
  left: 3px; bottom: 3px; background: #fff;
  border-radius: 50%; transition: transform .3s;
}
input:checked + .slider { background: #c9a96e; }
input:checked + .slider::before { transform: translateX(18px); }
input:disabled + .slider { cursor: not-allowed; opacity: .5; }

/* Boutons panneau custom */
.custom-actions { display: flex; gap: .7rem; align-items: center; flex-wrap: wrap; }

.btn-save-custom {
  background: linear-gradient(135deg, #d4b06a, #c9a96e);
  color: #1B2B4B; font-family: 'Montserrat', sans-serif;
  font-weight: 800; font-size: .85rem;
  padding: .65rem 1.6rem; border-radius: 6px; border: none; cursor: pointer;
  box-shadow: 0 4px 14px rgba(201,169,110,.3);
  transition: box-shadow .2s, transform .2s;
}
.btn-save-custom:hover { box-shadow: 0 6px 22px rgba(201,169,110,.5); transform: translateY(-1px); }

.btn-back-banner {
  background: transparent; color: rgba(255,255,255,.4);
  font-family: 'Montserrat', sans-serif; font-size: .78rem;
  border: none; cursor: pointer; padding: 0;
  text-decoration: underline; text-underline-offset: 3px;
  transition: color .2s;
}
.btn-back-banner:hover { color: rgba(255,255,255,.7); }

.btn-refuse-all-custom {
  background: transparent; color: rgba(255,255,255,.35);
  font-family: 'Montserrat', sans-serif; font-size: .78rem;
  border: 1px solid rgba(255,255,255,.12); border-radius: 4px;
  cursor: pointer; padding: .5rem .9rem; transition: color .2s, border-color .2s;
  margin-left: auto;
}
.btn-refuse-all-custom:hover { color: rgba(255,255,255,.6); border-color: rgba(255,255,255,.25); }

@media (max-width: 640px) {
  #banner-main { flex-direction: column; align-items: flex-start; }
  .banner-right { align-items: flex-start; width: 100%; }
  .banner-btns-row { width: 100%; }
  .btn-banner-accept, .btn-banner-refuse { flex: 1; text-align: center; }
  .banner-reassurance { text-align: left; }
  .custom-rows { flex-direction: column; }
  .custom-actions { flex-direction: column; align-items: flex-start; }
  .btn-refuse-all-custom { margin-left: 0; }
}
</style>
  </style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-logo">Baptiste &amp; Daphn√© <span>Immobilier</span></a>
  <a href="index.html" class="nav-back">‚Üê Retour au site</a>
</nav>

<div class="page-hero">
  <span class="eyebrow">Transparence & contr√¥le</span>
  <h1>Gestion des Cookies</h1>
  <span class="date">Derni√®re mise √† jour : f√©vrier 2026</span>
</div>

<div class="content">

  <!-- EXPLAINER -->
  <div class="explainer">
    <h2>üç™ C'est quoi, un cookie ?</h2>
    <p>Un cookie est un petit fichier texte d√©pos√© sur votre appareil (ordinateur, t√©l√©phone, tablette) lorsque vous visitez un site web. Il permet au site de m√©moriser des informations sur votre visite.</p>
    <p>Certains cookies sont <strong>essentiels</strong> au fonctionnement du site et ne peuvent pas √™tre d√©sactiv√©s. D'autres, dits <strong>optionnels</strong>, n√©cessitent votre accord pr√©alable : c'est ce que la loi fran√ßaise et le RGPD imposent.</p>
    <p>Sur ce site, les cookies optionnels servent √† <strong>mesurer l'audience</strong> (Google Analytics, Clarity) et √† <strong>suivre l'efficacit√© de nos publicit√©s</strong> (Google Ads). Ils ne contiennent aucune donn√©e personnelle permettant de vous identifier directement.</p>
  </div>

  <!-- PREFERENCE PANEL -->
  <div class="pref-panel">
    <h2>Mes pr√©f√©rences</h2>

    <div class="cookie-row required">
      <div class="cookie-info">
        <h3>Cookies essentiels <span class="badge required">Toujours actifs</span></h3>
        <p>N√©cessaires au bon fonctionnement du site. Ils ne collectent aucune donn√©e personnelle et ne peuvent pas √™tre d√©sactiv√©s.</p>
        <div class="cookie-names">Exemples : cookies de session, pr√©f√©rences de langue</div>
      </div>
      <div class="toggle-wrap">
        <label class="toggle"><input type="checkbox" checked disabled><span class="slider"></span></label>
        <span class="toggle-label">Requis</span>
      </div>
    </div>

    <div class="cookie-row">
      <div class="cookie-info">
        <h3>Google Analytics <span class="badge">Audience</span></h3>
        <p>Mesure le nombre de visiteurs, les pages consult√©es et la dur√©e des sessions. Les donn√©es sont anonymis√©es et agr√©g√©es ‚Äî elles ne permettent pas de vous identifier.</p>
        <div class="cookie-names">_ga, _gid, _ga_* ‚Äî conservation 26 mois</div>
      </div>
      <div class="toggle-wrap">
        <label class="toggle"><input type="checkbox" id="toggle-ga"><span class="slider"></span></label>
        <span class="toggle-label">Optionnel</span>
      </div>
    </div>

    <div class="cookie-row">
      <div class="cookie-info">
        <h3>Google Ads <span class="badge">Publicit√©</span></h3>
        <p>Mesure l'efficacit√© de nos campagnes publicitaires et permet de vous proposer des annonces pertinentes. Activ√© uniquement si vous avez interagi avec une de nos publicit√©s.</p>
        <div class="cookie-names">_gcl_au, _gcl_aw ‚Äî conservation 90 jours</div>
      </div>
      <div class="toggle-wrap">
        <label class="toggle"><input type="checkbox" id="toggle-ads"><span class="slider"></span></label>
        <span class="toggle-label">Optionnel</span>
      </div>
    </div>

    <div class="cookie-row">
      <div class="cookie-info">
        <h3>Microsoft Clarity <span class="badge">Comportement</span></h3>
        <p>Enregistre les sessions de navigation (clics, scrolls, heatmaps) de fa√ßon anonymis√©e pour nous aider √† am√©liorer l'ergonomie du site. Aucune donn√©e permettant de vous identifier n'est transmise.</p>
        <div class="cookie-names">_clck, _clsk, CLID, MUID ‚Äî conservation 13 mois</div>
      </div>
      <div class="toggle-wrap">
        <label class="toggle"><input type="checkbox" id="toggle-clarity"><span class="slider"></span></label>
        <span class="toggle-label">Optionnel</span>
      </div>
    </div>

    <div class="actions">
      <button class="btn-accept" onclick="acceptAll()">‚úì Tout accepter</button>
      <button class="btn-refuse" onclick="refuseAll()">Tout refuser</button>
      <button class="btn-save" onclick="savePrefs()">Enregistrer mes choix</button>
    </div>
    <div class="status-msg" id="status-msg">‚úì Vos pr√©f√©rences ont √©t√© enregistr√©es.</div>
  </div>

  <!-- COOKIE TABLE -->
  <div class="section-block">
    <h2>D√©tail des cookies utilis√©s</h2>
    <table class="cookie-table">
      <thead>
        <tr>
          <th>Cookie</th>
          <th>√âmetteur</th>
          <th>Finalit√©</th>
          <th>Dur√©e</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>_ga</code></td>
          <td>Google Analytics</td>
          <td>Distingue les utilisateurs uniques</td>
          <td>2 ans</td>
        </tr>
        <tr>
          <td><code>_gid</code></td>
          <td>Google Analytics</td>
          <td>Distingue les utilisateurs (session)</td>
          <td>24 heures</td>
        </tr>
        <tr>
          <td><code>_ga_*</code></td>
          <td>Google Analytics 4</td>
          <td>Maintient l'√©tat de session GA4</td>
          <td>2 ans</td>
        </tr>
        <tr>
          <td><code>_gcl_au</code></td>
          <td>Google Ads</td>
          <td>Suivi des conversions publicitaires</td>
          <td>90 jours</td>
        </tr>
        <tr>
          <td><code>_clck</code></td>
          <td>Microsoft Clarity</td>
          <td>Identifie l'utilisateur pour Clarity</td>
          <td>1 an</td>
        </tr>
        <tr>
          <td><code>_clsk</code></td>
          <td>Microsoft Clarity</td>
          <td>Regroupe les actions de la page</td>
          <td>24 heures</td>
        </tr>
        <tr>
          <td><code>CLID</code></td>
          <td>Microsoft Clarity</td>
          <td>Identifie la premi√®re visite</td>
          <td>1 an</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="section-block">
    <h2>Liens utiles</h2>
    <p>
      ‚Üí <a href="https://tools.google.com/dlpage/gaoptout" target="_blank">D√©sactiver Google Analytics dans votre navigateur</a><br/>
      ‚Üí <a href="https://adssettings.google.com" target="_blank">G√©rer vos pr√©f√©rences Google Ads</a><br/>
      ‚Üí <a href="https://clarity.microsoft.com/privacy" target="_blank">Politique de confidentialit√© Microsoft Clarity</a><br/>
      ‚Üí <a href="https://www.cnil.fr/fr/cookies-et-autres-traceurs/regles/cookies/que-dit-la-loi" target="_blank">R√®glementation cookies ‚Äì CNIL</a>
    </p>
  </div>

</div>

<footer>
  <div>
    <div class="footer-logo">Baptiste &amp; Daphn√© <span>Immobilier</span></div>
    <div class="footer-links">
      <a href="mentionslegales.html">Mentions l√©gales</a>
      <a href="politiquedeconfidentialite.html">Politique de confidentialit√©</a>
      <a href="gestiondescookies.html">Gestion des cookies</a>
    </div>
  </div>
  <p>EI Daphn√© MARTIN MARIN GUILLON, EI Baptiste AUDOUIN ‚Äî Mandataires ind√©pendants IAD France ‚Äî Document non contractuel ‚Äî F√©vrier 2026</p>
</footer>

<script>
  const CONSENT_KEY = 'bd_cookie_consent';

  function loadPrefs() {
    try {
      const saved = JSON.parse(localStorage.getItem(CONSENT_KEY));
      if (saved) {
        document.getElementById('toggle-ga').checked = !!saved.analytics;
        document.getElementById('toggle-ads').checked = !!saved.ads;
        document.getElementById('toggle-clarity').checked = !!saved.clarity;
        return true;
      }
    } catch(e) {}
    return false;
  }

  function saveConsent(prefs) {
    localStorage.setItem(CONSENT_KEY, JSON.stringify({ ...prefs, ts: Date.now() }));
  }

  function acceptAll() {
    document.getElementById('toggle-ga').checked = true;
    document.getElementById('toggle-ads').checked = true;
    document.getElementById('toggle-clarity').checked = true;
    saveConsent({ analytics: true, ads: true, clarity: true });
    showStatus();
    hideBanner();
  }

  function refuseAll() {
    document.getElementById('toggle-ga').checked = false;
    document.getElementById('toggle-ads').checked = false;
    document.getElementById('toggle-clarity').checked = false;
    saveConsent({ analytics: false, ads: false, clarity: false });
    showStatus();
    hideBanner();
  }

  function savePrefs() {
    saveConsent({
      analytics: document.getElementById('toggle-ga').checked,
      ads: document.getElementById('toggle-ads').checked,
      clarity: document.getElementById('toggle-clarity').checked
    });
    showStatus();
    hideBanner();
  }

  function showStatus() {
    const msg = document.getElementById('status-msg');
    msg.style.display = 'block';
    setTimeout(() => msg.style.display = 'none', 4000);
  }

  function hideBanner() {
    document.getElementById('cookie-banner').classList.add('hidden');
  }

  function showBanner() {
    document.getElementById('cookie-banner').classList.remove('hidden');
  }

  function bannerAccept() { acceptAll(); }
  function bannerRefuse() { refuseAll(); }

  // Init
  const hasConsent = loadPrefs();
  if (!hasConsent) setTimeout(showBanner, 800);
</script>

</body>
</html>
